# Список бэкпортированных патчей из версии 4.0/4.2/4.4

[In English / По-английски](PATCHLIST.md)

~~~~
[ZBXNEXT-435] Add Oracle TNSNAMES connect support (https://support.zabbix.com/browse/ZBXNEXT-435)
[ZBXNEXT-1302] added low-level discovery of block devices (asestakovs) (https://support.zabbix.com/browse/ZBXNEXT-1302)
[ZBXNEXT-1456] ability to filter for discovered items (https://support.zabbix.com/browse/ZBXNEXT-1456)
[ZBXNEXT-1567] added item "vfs.dir.count" for counting directory entries (valdis) (https://support.zabbix.com/browse/ZBXNEXT-1567)
[ZBXNEXT-2315] allow matching content in web monitoring headers (https://support.zabbix.com/browse/ZBXNEXT-2315)
[ZBXNEXT-2946] added new key "wmi.getall" to collect all required wmi properties in a json document (MVekslers) (https://support.zabbix.com/browse/ZBXNEXT-2946)
[ZBXNEXT-4577] improved performance of Zabbix server by replacing semaphores to pthread mutexes and read-write locks (vso, wiper) (https://support.zabbix.com/browse/ZBXNEXT-4577)
[ZBXNEXT-4757] added support of "pused" mode for cache-related internal items (Sasha) (https://support.zabbix.com/browse/ZBXNEXT-4757)
[ZBXNEXT-4898] added support IPv6 for 'net.dns' and 'net.dns.record' (MVekslers) (https://support.zabbix.com/browse/ZBXNEXT-4898)
[ZBXNEXT-4941] Investigate Oracle bulk update performance (https://support.zabbix.com/browse/ZBXNEXT-4941)
[ZBXNEXT-4967] added Zabbix sender data sending to multiple destinations given in ServerActive configuration parameter (viktors)
[ZBXNEXT-5179] added option to specify absolute path in LoadModule; thanks to Glebs Ivanovskis for the patch (asestakovs) (https://support.zabbix.com/browse/ZBXNEXT-5179)
[ZBX-7798] improved performance of icmpping* for fping v4.0 and more (MVekslers) (https://support.zabbix.com/browse/ZBX-7798)
[ZBX-9867] improved Zabbix daemon termination by not using signal unsafe functions in signal handler; improved Zabbix server and Zabbix proxy process termination by stopping data collection and waiting for history syncers to finish (vso) (https://support.zabbix.com/browse/ZBX-9867)
[ZBX-11764] fixed automake scripts; thanks to Tomasz Kłoczko for the patch (akozlovs) (https://support.zabbix.com/browse/ZBX-11764)
[ZBX-11970] fixed style for some enumerators and structure type declarations (abs, Andris) (https://support.zabbix.com/browse/ZBX-11970)
[ZBX-12671] refactoring the code base to support the compiler flag -Wstrict-prototypes (https://support.zabbix.com/browse/ZBX-12671)
[ZBX-12983] fixed compilation warnings under Windows (valdis) (https://support.zabbix.com/browse/ZBX-12983)
[ZBX-13155] excluded src/libs/zbxself from agent compilation (https://support.zabbix.com/browse/ZBX-13155)
[ZBX-13186] Show discovery error "Value should be a JSON object" in zabbix log file (https://support.zabbix.com/browse/ZBX-13186)
[ZBX-13266] improved performance of the SQL queries with lot of IDs in the condition (https://support.zabbix.com/browse/ZBX-13266)
[ZBX-14441] fixed windows agent "eventlog" key for reading big event log files of windows 2003 (MVekslers) (https://support.zabbix.com/browse/ZBX-14441)
[ZBX-14624] fixed agent collector not releasing connection to missing/removed disk devices (Andris, yurii) (https://support.zabbix.com/browse/ZBX-14624)
[ZBX-14853] fixed error of vmware items caused by misconfigured vmware maxQueryMetrics parameter (MVekslers) (https://support.zabbix.com/browse/ZBX-14853)
[ZBX-14876] added a new optional parameter <regex_excl_dir> to items vfs.dir.size[] and vfs.dir.count[] (viktors) (https://support.zabbix.com/browse/ZBX-14876)
[ZBX-15010] fixed regexp compilation error for patterns with referenced subpatterns (vjaceslavs) (https://support.zabbix.com/browse/ZBX-15010)
[ZBX-15090] fixed memory leak when validating regular expression preprocessing step parameters during LLD (wiper); improved coding style to meet guidelines (https://support.zabbix.com/browse/ZBX-15090)
[ZBX-15106] improved error messages for item preprocessing, general pcre code improvements (Andris, wiper) (https://support.zabbix.com/browse/ZBX-15106)
[ZBX-15178] fixed wrong behaviour when referencing unexisting capture groups in item regexp preprocessing, general pcre code improvements (Andris, kalimulin) (https://support.zabbix.com/browse/ZBX-15178)
[ZBX-15225] improved handling of timeouts in vfs.dir.size and vfs.dir.count items on Windows agent (asitals) (https://support.zabbix.com/browse/ZBX-15225)
[ZBX-15301] fixed monotonous lag behind in Windows "system.localtime" (MVekslers) (https://support.zabbix.com/browse/ZBX-15301)
[ZBX-15428] improved regular expression performance by studying compiled pattern (vso) (https://support.zabbix.com/browse/ZBX-15428)
[ZBX-15552] fixed compilation with LibreSSL as OpenSSL replacement and OpenSSL without PSK support (Andris) (https://support.zabbix.com/browse/ZBX-15552)
[ZBX-15609] added missing optional parameter "<regex_excl_dir>" for "vfs.dir.count" and "vfs.dir.size" item keys in item helper (Ivo) (https://support.zabbix.com/browse/ZBX-15609)
[ZBX-15675] added support for more than 64 CPUs in Windows agent (kalimulin) (https://support.zabbix.com/browse/ZBX-15675)
[ZBX-15685] fixed zabbix_sender failing to report the error due to closed connection (arimdjonoks) (https://support.zabbix.com/browse/ZBX-15685)
[ZBX-15898] fixed compilation warning regarding too large integer constant (akozlovs) (https://support.zabbix.com/browse/ZBX-15898)
[ZBX-15899] added output sanitization to prevent invalid UTF-8 sequences in regexp-based text replacement (Andris) (https://support.zabbix.com/browse/ZBX-15899)
[ZBX-15915] fixed linking error if round() is undefined (https://support.zabbix.com/browse/ZBX-15915)
[ZBX-15955] fixed security vulnerability - accepting connections from not allowed addresses (Andris, vso) (https://support.zabbix.com/browse/ZBX-15955)
[ZBX-15962] added mounted filesystems to vfs.fs.discovery of windows agent (asestakovs) (https://support.zabbix.com/browse/ZBX-15962)
[ZBX-16096] fixed "system.cpu.util" reporting incorrect CPU utilisation due to guest time sometimes not being fully included in user time by "/proc/stat" (vso) (https://support.zabbix.com/browse/ZBX-16096)
[ZBX-16103] Lower PCRE recursion limit (https://support.zabbix.com/browse/ZBX-16103)
[ZBX-16166] fixed Zabbix fping feature detection does not work with fping builds since 10 Feb 2017 (akozlovs) (https://support.zabbix.com/browse/ZBX-16166)
[ZBX-16218] fixed zabbix_sender does not clean up its semaphores (akozlovs) (https://support.zabbix.com/browse/ZBX-16218)
[ZBX-16239] fixed compilation warining related to prototypes of module API functions (viktors) (https://support.zabbix.com/browse/ZBX-16239)
[ZBX-16256] eliminated possible infinite fetch loop with OracleDB (viktors) (https://support.zabbix.com/browse/ZBX-16256)
[ZBX-16270] fixed memory leak in IPC service when queueing multiple messages to client (akozlovs) (https://support.zabbix.com/browse/ZBX-16270)
[ZBX-16277] fixed compilation Zabbix agent for Windows with options available for Windows Vista and newer (MVekslers)
[ZBX-16315] fixed Zabbix server not to cause foreign key constraint failure on Zabbix proxy when changing and sending configuration at the same time (vso) (https://support.zabbix.com/browse/ZBX-16315)
[ZBX-16346] fixed compilation for Oracle Instant Client v18.5 and higher (asestakovs) (https://support.zabbix.com/browse/ZBX-16346)
[ZBX-16368] fixed fping double call (akozlovs) (https://support.zabbix.com/browse/ZBX-16368)
[ZBX-16428] fixed SIGBUS crash when mmap memory is not accessible (atumilovics) (https://support.zabbix.com/browse/ZBX-16428)
[ZBX-16460] fixed Zabbix daemon termination on FreeBSD (vso) (https://support.zabbix.com/browse/ZBX-16460)
[ZBX-16534] fixed stdout and stderr redirection after external log rotation (akozlovs) (https://support.zabbix.com/browse/ZBX-16534)
[ZBX-16545] fixed shell script execution timeout log message (atumilovics) (https://support.zabbix.com/browse/ZBX-16545)
[ZBX-16595] optimized active logs checks monitoring when buffer flushing fails (arimdjonoks) (https://support.zabbix.com/browse/ZBX-16595)
[ZBX-16596] added handling of BOM to detect encoding for vfs.file.contents, vfs.file.regex and vfs.file.regmatch (arimdjonoks) (https://support.zabbix.com/browse/ZBX-16596)
[ZBX-16612] fixed possibility of high CPU usage on Windows (vso) (https://support.zabbix.com/browse/ZBX-16612)
[ZBX-16664] fixed IPMI poller skips processing if one of the elements is missing information (akozlovs) (https://support.zabbix.com/browse/ZBX-16664)
[ZBX-16671] fixed server crashing when linking web scenario template (arimdjonoks) (https://support.zabbix.com/browse/ZBX-16671)
[ZBX-16677] fixed empty sql query DBexecute_overflowed_sql call during host availability update (atumilovics) (https://support.zabbix.com/browse/ZBX-16677)
[ZBX-16680] fixed freeing locked resources when Zabbix agent cannot be started and has to exit with failure (https://support.zabbix.com/browse/ZBX-16680)
[ZBX-16683] fixed race condition between history syncer and escalator that caused recovery operations being delayed by step duration (vso) (https://support.zabbix.com/browse/ZBX-16683)
[ZBX-16711] ensuring errbuf is emptied before every curl_easy_perform request (arimdjonoks) (https://support.zabbix.com/browse/ZBX-16711)
[ZBX-16750] fixed broken validation of peer certificate issuer and subject strings in TLS connect, fixed logging (Andris) (https://support.zabbix.com/browse/ZBX-16750)
[ZBX-16767] fixed possible null pointer arithmetic; thanks to Mikhail Grigorev for the patch (asestakovs) (https://support.zabbix.com/browse/ZBX-16767)
[ZBX-16784] fixed Oracle performance by using "between" operator in SQL queries (averza) (https://support.zabbix.com/browse/ZBX-16784)
[ZBX-16790] fixed log rotation on Windows (https://support.zabbix.com/browse/ZBX-16790)
[DEV-732] fixed warnings reported by cppcheck static analysis; updated "cppcheck-static-analysis" targer in backend-build Jenkins job
[DEV-698] removed unused local variables
[DEV-699] implementation of zbx_vector_XXX_clear_ext() as typed function
[DEV-699] changed type name to 'zbx_ ## __id ## _free_func_t' for function 'zbx_vector_ ## __id ## _clear_ext()'
[DEV-1052] added limit for memory allocation in regex preprocessing steps
[DEV-1164] expanded ZBX_THREAD_LOCAL define to __thread for gcc,clang
[DEV-1287] added filename-length-max=99 option to AM_INIT_AUTOMAKE macro
[DEV-1334] fixed undefined variable error with openssl without psk support
[DEV-1334] fixed clang warnings
[DEV-1334] fixed coverity warnings
[DBS-001] fixed format string is defined in proxy_tasks.c and timer.c (mgrigorev)
[DBS-002] added Latest data in host settings page (mgrigorev)
~~~~
